"""
Reentrancy Exploit â€” Conceptual Reproduction

Exploit path:
1. Attacker deposits once.
2. Calls withdraw().
3. During external call, attacker re-enters withdraw().
4. Balance check still passes.
5. Funds withdrawn multiple times.

This demonstrates:
- Repeat consumption
- State trusted before finality
"""

def exploit():
    deposit(100)

    # First withdraw triggers reentrancy
    withdraw(100)

    # Re-enter before balance update
    withdraw(100)

    # Result: >100 withdrawn from a 100 deposit
    print("Invariant broken: value consumed twice")
